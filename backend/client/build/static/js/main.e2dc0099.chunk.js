(this["webpackJsonpregistration-form"]=this["webpackJsonpregistration-form"]||[]).push([[0],{151:function(e,a,t){},178:function(e,a,t){e.exports=t(342)},184:function(e,a,t){},337:function(e,a,t){},338:function(e,a,t){},340:function(e,a,t){},341:function(e,a,t){},342:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(9),s=t.n(l),c=t(38),o=t(365),i=(t(183),t(184),t(32)),m=t(159),u=t(153),d=t(16),E=t(27),p=t.n(E),b=t(158),h=t(15),g=t(13),f=t(72),v=t(26),N=t(49),w=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{variant:e.btnType,className:e.className,disabled:e.disabled,onClick:e.onClick},e.titleBtn))},y=t(1),k=Object(g.e)((function(e){var a=e.formik,t=a.errors,n=a.touched,l=Object(y.a)({},e);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:l.name,className:t[l.name]&&n[l.name]?"label-error":""},t[l.name]&&n[l.name]?r.a.createElement(g.a,{name:l.name,className:"invalid-feedback"}):[l.labels]),r.a.createElement(g.b,{name:l.name,type:l.type,className:"form-control"+(t[l.name]&&n[l.name]?"   is-invalid":"")})))})),S=t(20),j=S.object().shape({email:S.string().email("Email is invalid").required("Email is required"),password:S.string().min(6,"Password must be at least 6 characters").required("Password is required"),confirmPassword:S.string().oneOf([S.ref("password"),null],"Passwords must match").required("Confirm Password is required")}),C=S.object().shape({date:S.string().required("Date is required"),city:S.string().required("City is required"),gender:S.string().required("Gender is required")}),O=S.object().shape({email:S.string().email("Email is invalid").required("Email is required"),password:S.string().min(6,"Password must be at least 6 characters").required("Password is required")}),T=(t(151),function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.d,{initialValues:{email:"",password:"",confirmPassword:""},validationSchema:j,onSubmit:function(a){e.handleSubmit(a,!1),e.nextStep()}},(function(a){a.errors;var t=a.isValid,n=(a.touched,a.handleSubmit),l=a.handleReset,s=a.dirty;return r.a.createElement(f.a,null,r.a.createElement(h.a,{className:"inputFiels"},r.a.createElement(k,{type:"text",name:"email",labels:"Email"}),r.a.createElement(k,{type:"password",name:"password",labels:"Password"}),r.a.createElement(k,{type:"password",name:"confirmPassword",labels:"Confirm Password"})),r.a.createElement(h.a,{className:"formButtons"},r.a.createElement(v.a,{variant:"secondary",onClick:e.prevStep},"Previous"),r.a.createElement(N.a,null,r.a.createElement(w,{btnType:"danger",className:"mx-2",onClick:l,disabled:!s,titleBtn:"Reset"}),r.a.createElement(w,{btnType:"primary",onClick:n,disabled:!t||!s,titleBtn:"Next"}))))})))}),F=t(52),q=function(e){var a=e.errorMessage,t=e.show,n=e.handleClose;return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(F.a,{show:t,onHide:n,animation:!0},r.a.createElement(F.a.Header,{closeButton:!0},r.a.createElement(F.a.Title,null,"Error")),r.a.createElement(F.a.Body,null,a),r.a.createElement(F.a.Footer,null,r.a.createElement(v.a,{variant:"secondary",onClick:n},"Close"))))},x=t(2),B=t(364),P=(t(336),function(e){var a=e.name,t=e.form,n=t.setFieldValue,l=(t.setFieldTouched,Object(x.a)(t,["setFieldValue","setFieldTouched"]),e.field.value);Object(x.a)(e,["name","form","field"]);return r.a.createElement(B.a,{name:a,required:!0,autoOk:!0,value:l,id:"date-picker-dialog",label:"date-picker",openTo:"year",views:["year","month","date"],format:"dd/MM/yyyy",placeholder:"10/10/2018",onChange:function(e){n("date",null===e?String(e):e.toLocaleDateString())}})}),M=Object(g.e)((function(e){var a=e.formik,t=a.errors,n=a.touched,l=Object(y.a)({},e);return console.log(t),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:l.name,className:t[l.name]&&n[l.name]?"label-error":""},t[l.name]&&n[l.name]?r.a.createElement(g.a,{name:l.name,className:"invalid-feedback"}):[l.labels]),r.a.createElement(g.b,{component:P,name:"date"})))})),R=Object(g.e)((function(e){var a=e.formik,t=a.errors,n=a.touched,l=Object(y.a)({},e);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:l.name,className:t[l.name]&&n[l.name]?"label-error":""},t[l.name]&&n[l.name]?r.a.createElement(g.a,{name:l.name,className:"invalid-feedback"}):[l.labels]),r.a.createElement(g.b,{name:l.name,as:l.as,className:"form-control"+(t[l.name]&&n[l.name]?"   is-invalid":"")},r.a.createElement("option",{value:"",disabled:!0},"Select a value"),r.a.createElement("option",{value:"male"},"Male"),r.a.createElement("option",{value:"female"},"Female"),r.a.createElement("option",{value:"other"},"Other"))))})),V=t(160),D=t(17),A=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{utils:V.a},r.a.createElement(g.d,{initialValues:{date:null,city:"",gender:""},validationSchema:C,onSubmit:function(a){console.log(a),e.handleSubmit(a,!0)}},(function(a){a.errors;var t=a.isValid,n=(a.touched,a.handleSubmit),l=a.handleReset,s=a.dirty;return r.a.createElement(g.c,null,r.a.createElement(h.a,{className:"inputFiels"},r.a.createElement(k,{type:"text",name:"city",labels:"City"}),r.a.createElement(M,{name:"date",labels:"Date"}),r.a.createElement(R,{as:"select",name:"gender",labels:"Gender"})),r.a.createElement(h.a,{className:"formButtons"},r.a.createElement(v.a,{variant:"secondary",onClick:e.prevStep},"Previous"),r.a.createElement(N.a,null,r.a.createElement(w,{btnType:"danger",className:"mx-2",onClick:l,disabled:!s,titleBtn:"Reset"}),r.a.createElement(w,{btnType:"primary",onClick:n,disabled:!t||!s,titleBtn:"Next"}))))}))),r.a.createElement(q,{errorMessage:e.error.errorMessage,show:e.error.show,handleClose:e.error.handleClose}))},I=t(161),G=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"progressBar"},r.a.createElement(I.a,{animated:!0,now:e.progress,className:"wrapper-progress"})))},W=(t(337),function(e){var a=e.resetStep;return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{className:"figure"},r.a.createElement("div",{className:"circle"},r.a.createElement("div",{className:"rectangle"}))),r.a.createElement(h.a,{className:"welcome-btn"},r.a.createElement(w,{btnType:"outline-primary",titleBtn:"Want to Sign In?",onClick:a})))}),H=t(23),J=t.n(H),L=(t(338),"http://localhost:3002"),U=Object(i.g)((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.d,{initialValues:{email:"",password:""},validationSchema:O,onSubmit:function(a){a&&p.a.post("".concat(L,"/login"),a).then((function(a){(console.log(a),200===a.status)&&(J.a.set("AccessToken",a.data.accessToken,{expires:new Date(1e3*a.data.expireDate)}),J.a.set("RefreshToken",a.data.refreshToken),J.a.get("AccessToken")?(e.history.push("dashboard"),console.log("success")):console.log("Token is null"))})).catch((function(a){console.log(a),"Network Error"===a.message?(e.error.setErrorMessage(a.message+": You need to launch backend server"),e.error.setShow(!0)):400===a.response.status&&(e.error.setErrorMessage(a.message+": Incorect email or password"),e.error.setShow(!0))}))}},(function(e){e.errors;var a=e.isValid,t=(e.touched,e.handleSubmit),n=e.handleReset,l=e.dirty;return r.a.createElement(f.a,{className:"auth"},r.a.createElement(h.a,{className:"inputFiels"},r.a.createElement(k,{type:"text",name:"email",labels:"Email"}),r.a.createElement(k,{type:"password",name:"password",labels:"Password"})),r.a.createElement(h.a,{className:"auth-buttons"},r.a.createElement(N.a,null,r.a.createElement(w,{btnType:"danger",className:"mx-2",onClick:n,disabled:!l,titleBtn:"Reset"}),r.a.createElement(w,{btnType:"primary",onClick:t,disabled:!a||!l,titleBtn:"Sign In"}))))})),r.a.createElement(h.a,{className:"intro"},r.a.createElement("p",null,"Do you want to create account?"),r.a.createElement("div",{className:"intro-btn"},r.a.createElement(v.a,{variant:"outline-primary",onClick:e.nextStep},"Sign Up"))),r.a.createElement(q,{errorMessage:e.error.errorMessage,show:e.error.show,handleClose:e.error.handleClose}))})),Y=function(e){var a=Object(n.useState)(0),t=Object(d.a)(a,2),l=t[0],s=t[1],c=Object(n.useState)({}),o=Object(d.a)(c,2),i=o[0],m=o[1],E=Object(n.useState)([]),g=Object(d.a)(E,2),f=g[0],v=g[1],N=Object(n.useState)(!1),w=Object(d.a)(N,2),y=w[0],k=w[1],S=function(){return k(!1)},j=function(){s(l+1)},C=function(){s(l-1)},O=function(){s(0)},F=function(e){m(e),e&&p.a.post("".concat(L,"/register"),e).then((function(e){console.log(e),console.log(e.status),j()})).catch((function(e){console.log(e.message),"Network Error"===e.message&&(v(e.message+": You need to launch backend server"),k(!0))}))},q=function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=Object(u.a)({},i,{},e);console.log(t),a?F(t):m(t)};return r.a.createElement("div",{className:"form"},r.a.createElement(b.a,{className:"wrapper no-gutters"},r.a.createElement(h.a,{className:"header"},function(e){return 0===e?r.a.createElement("h1",{className:"header-title"},"Sign In"):r.a.createElement("h1",{className:"header-title"},"Sign Up")}(l),r.a.createElement(G,{progress:l/3*100})),function(){switch(l){case 0:return r.a.createElement(U,{nextStep:j,error:{errorMessage:f,setErrorMessage:v,setShow:k,show:y,handleClose:S}});case 1:return r.a.createElement(T,{handleSubmit:q,prevStep:C,nextStep:j});case 2:return r.a.createElement(A,{handleSubmit:q,prevStep:C,error:{errorMessage:f,show:y,handleClose:S}});case 3:return r.a.createElement(W,{resetStep:O});default:return}}()))},$=(t(340),function(e){var a=Object(n.useState)([]),t=Object(d.a)(a,2),l=t[0],s=t[1];return Object(n.useEffect)((function(){p.a.get("".concat(L,"/dashboard"),{headers:{"x-auth":"".concat(J.a.get("AccessToken"))}}).then((function(e){console.log(e);var a=e.data;s(a)})).catch((function(e){console.log(e)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"dashboard"},r.a.createElement(c.b,{to:"/"},r.a.createElement(w,{btnType:"outline-success",className:"dashboard-btn",titleBtn:"Begin"})),r.a.createElement("h1",{className:"dashboard-title text-center"},"List of registered users"),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"dashboard-board row no-gutters"},l.map((function(e){return r.a.createElement("div",{key:e._id,className:"col-12 col-lg board-item"},r.a.createElement("div",{className:"board-item-section"},r.a.createElement("p",{className:"title"},"Email: "),r.a.createElement("p",{className:"description"},e.email)),r.a.createElement("div",{className:"board-item-section"},r.a.createElement("p",{className:"title"},"City: "),r.a.createElement("p",{className:"description"},e.city)),r.a.createElement("div",{className:"board-item-section"},r.a.createElement("p",{className:"title"},"Date of birth: "),r.a.createElement("p",{className:"description"},e.date)),r.a.createElement("div",{className:"board-item-section"},r.a.createElement("p",{className:"title"},"Gender: "),r.a.createElement("p",{className:"description"},e.gender)))}))))))}),_=function(e){var a=e.component,t=Object(x.a)(e,["component"]);return J.a.get("AccessToken")?r.a.createElement(i.b,Object.assign({},t,{render:function(e){return r.a.createElement(a,e)}})):r.a.createElement(i.b,Object.assign({},t,{render:function(e){return r.a.createElement(i.a,{to:"/"})}}))},z=(t(341),function(e){return r.a.createElement(m.a,{fluid:!0,className:"no-gutters"},r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/",component:Y}),r.a.createElement(_,{path:"/dashboard",component:$})))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));p.a.interceptors.request.use((function(e){return console.log("Request"),console.log(e),e}),(function(e){return Promise.reject(e)})),p.a.interceptors.response.use((function(e){console.log("Response"),console.log(e);var a=J.a.get("RefreshToken");return!J.a.get("AccessToken")&&a&&p.a.post("".concat(L,"/refreshToken"),{refreshToken:a}).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),e}),(function(e){return Promise.reject(e)})),s.a.render(r.a.createElement(o.a,null,r.a.createElement(c.a,null,r.a.createElement(z,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[178,1,2]]]);
//# sourceMappingURL=main.e2dc0099.chunk.js.map